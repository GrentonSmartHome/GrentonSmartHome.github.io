<!DOCTYPE html><html lang="pl"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="author" content="Grenton Sp. z o. o."/><title>Grenton Downloads</title><meta name="twitter:title" content="Grenton Downloads"/><meta name="og:title" content="Grenton Downloads"/><link href="/styles.css" rel="stylesheet"/><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous"/></head><body class="bg-light"><nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark" aria-label="Main navigation"><div class="container-fluid"><a class="navbar-brand" href="/release-pl"><img class="glogo" src="/images/logo.svg" alt="logo-grenton" height="18"/></a><span><a style="text-decoration: none;font-size: .835rem; color:#ffffff!important;" href="/beta-en/smartpanelv6-new-functionality"><img style="margin-bottom: 3px;" height="16px" src="/images/english.png"/>&nbsp;English</a></span></div></nav><div class="nav-scroller bg-white shadow-sm"><nav class="nav nav-underline" aria-label="Secondary navigation"><a class="nav-link active" aria-current="page" href="/beta-pl">&larr; Powrót</a></nav></div><main class="container"><div class="d-flex align-items-center p-3 my-3 text-white bg-purple rounded shadow-sm"><div class="lh-1"><h1 class="h6 mb-0 text-white lh-1">Konfiguracja modułu Smart Panel w wersji v6</h1><small>Instrukcja</small></div></div><div class="alert alert-warning" role="alert"><small><b class="uwaga">UWAGA!</b><br>Smart Panel w wersji v6 dostępny jest dla Object Managera w wersji 1.4.1 i wyższej oraz dla CLU Z-Wave z firmware 5.08.01 i wyższym.</small></div><h5>Parametry konfiguracyjne</h5><p>W najnowszej wersji modułu Smart Panel v6 zostały wprowadzone nowe parametry konfiguracyjne dla takich obiektów jak:</p><ul><li><code>PANEL</code>,</li><li><code>PANEL_PAGE</code>,</li><li><code>PANELSENSTEMP</code>.</li></ul><p>Pełną listę zmian wprowadzonych w wersji V6 można znaleźć w release notes danej wersji: <a href="/beta-pl/smartpanel/">Release Notes - moduł Smart Panel</a></p><h5>Nowa funkcjonalność</h5><h5>Mechanizm informowania o błędnej konfiguracji / przejściu w tryb Rozproszonej Logiki</h5><p>Nową funkcjonalnością wprowadzoną wraz z wersją v6 jest mechanizm informowania użytkownika o błędnej konfiguracji lub przejścia w tryb Rozproszonej Logiki. Mechanizm ten polega na tym, iż moduł oczekuje około 10 sekund na otrzymanie konfiguracji po jej wysłaniu lub restarcie systemu. Po tym czasie kończy się okres oczekiwania na konfigurację, a użytkownik zostanie poinformowany o błędnej konfiguracji lub przejściu w tryb Rozproszonej Logiki poprzez jeden, krótki i niski dźwięk.</p><h5>Tryb Rozproszonej Logiki</h5><p>Kolejną funkcjonalnością dodaną do najnowszej wersji modułu Smart Panel jest tryb Rozproszonej Logiki. Jest on dostępny od wersji 6.1.8-2115 i wyższej. Szczegółowe informacje na temat konfiguracji oraz sposobu działania Rozproszonej Logiki zamieszczono w dalszej częsci opisu.</p><h5>Zmiana UI oraz mechanizmu działania stron typu Thermostats</h5><p>Moduł Smart Panel w wersji v6 oferuje odświeżony UI strony typu Thermostats, a także nowe funkcje. Sposób tworzenia i konfiguracji strony z wykorzystaniem obiektów typu Thermostats jest taki sam jak dla poprzednich wersji - patrz User Manula rozdział <em>5.9. Tworzenie konfiguracji z wykorzystaniem obiektu strony Thermostats</em>.</p><h5>Zmiana UI termostatu</h5><p>Poniższy schemat przedstawia poglądowy wygląd odświeżonego termostatu na ekranie Smart Panelu. Zmianie uległo kilka elementów:</p><ul><li>wprowadzenie ikony w lewym górnym rogu - domyślnie wyświetlana jest ikona "chmode", która znajduje się na karcie SD (ikona została przedstawiona na schemacie). Jednakże w przypadku braku niniejszej ikony na karcie SD, zostanie wyświetlony napis "mode". Dodatkowo użytkownik może wprowadzić własną ikonę za pośrednictwem metody <code>SetObject_X_CustomIcon</code> lub też cechy wbudowanej <code>Object_X_CustomIcon</code>,</li></ul><ul><li>za pośrednictwem strzałki użytkownik może przejść do kolejnego termostatu na stronie (krótkie naciśniecie przycisku w przypadku więcej niż jednego termostatu na stronie) lub przejść do następnej strony (krótkie naciśnięcie w przypadku jednego termostatu na stronie, dłuższe przytrzymanie przycisku w przypadku więcej niż jednego termostatu na stronie),</li></ul><ul><li>przy strzałce zostały wprowadzone kropki, które sygnalizują numer termostatu obecnie wyświetlanego (jedna kropka - <code>Object_1_Id</code>, dwie kropki - <code>Object_2_Id</code>, itd.). W przypadku kiedy na stronie jest tylko i wyłącznie jeden termostat, kropki nie są wyświetlane,</li></ul><ul><li>za pomocą "-" / "+" istnieje możliwość zmiany zadanej temperatury oraz trybu działania termostatu z Auto na Manual,</li></ul><ul><li>dłuższe przytrzymanie lewego górnego przycisku (w dalszej części zwanego 'mode') powoduje wyłączenie / włączenie termostatu lub zmianę z trybu Manual na tryb Auto,</li></ul><ul><li>w przypadku kiedy termostat jest wyłączony, to znika zadana temperatura, a pojawia się napis "Off", który usytuowany jest centralnie,</li></ul><ul><li>zmianie uległo również wyświetlanie temperatury odczytanej ze źródła - obecnie większą czcionką wyświetlany jest wartość temperatury przed przecinkiem, natomiast mniejszą wartość po przecinku oraz jednostka. Dodatkowo wyświetlanie tej temperatury jest zależne od wielkości wprowadzonej ikony - więcej na ten temat w kolejnym podpunkcie.</li></ul><img src="/images/images-pl/SMARTPANEL_CONFIG_V6_TYPE_THERMOSTATS_1.jpg" alt="SMARTPANEL<em>CONFIG</em>V6<em>TYPE</em>THERMOSTATS_1.jpg"/><h5>Nowe funkcje na stronie typu Thermostats</h5><p>Od wersji v6 modułu Smart Panel dostępne są nowe funkcjonalności na stronie typu Thermostats. Jest to związane z wprowadzonymi zmianami w obrębie UI termostatu.</p><p><strong>Możliwość ustawiania własnych ikon</strong></p><p>Pierwszą nową funkcjonalnością jest wspomniana wcześniej możliwość ustawiania własnych ikon przez użytkownika w lewym górnym narożniku wyświetlacza. Ich zmiana jest możliwa zarówno poprzez metodę <code>SetObject_X_CustomIcon</code> jak również poprzez cechę wbudowaną <code>Object_X_CustomIcon</code>. Szerokość wprowadzonej ikony ma wpływ na współrzędną "x" aktualnej temperatury. Dopuszczalne są ikony o wymiarach 64 x 32 piksele. W przypadku przekroczenia szerokości ikony x &gt; 64, na wyświetlaczu zostanie narysowana wyłącznie sama ikona - UI termostatu nie będzie wyświetlany - jest to tak zwany tryb "big icon". Aby powrócić do wyświetlania interfejsu związanego z termostatem, należy ustawić ikonę, której szerokość nie przekracza 64 pikseli.</p><p><strong>Możliwość przypisania akcji pod nowe zdarzenia</strong></p><p>Następną funkcjonalnością wprowadzoną w nowej wersji modułu jest możliwość przypisywania akcji pod nowe zdarzenia <code>OnThermXModeButtonClick</code>, gdzie X oznacza numer termostatu na stronie. Zdarzenie to jest generowane w momencie kliknięcia w przycisk 'mode' (lewy, górny przycisk).</p><img src="/images/images-pl/SMARTPANEL_CONFIG_V6_TYPE_THERMOSTATS_2.jpg" alt="SMARTPANEL<em>CONFIG</em>V6<em>TYPE</em>THERMOSTATS_2.jpg"/><p><strong>Przykład konfiguracji nowych funkcjonalności</strong></p><p>Konfiguracja lokalnego termostatu wraz ze zmianą pracy (grzanie / chłodzenie) - do stworzenia niniejszej konfiguracji wykorzystane są takie obiekty jak:</p><ul><li>obiekt wirtualny Thermostat,</li><li>obiekt DOUT1 (np. modułu Relay) - odpowiedzialny za załączanie grzania / chłodzenia - wykorzystany w obiekcie wirtualnym Thermostat,</li><li>obiekt DOUT2 (np. modułu Relay) - selekcja co ma zostać załączone: grzanie czy chłodzenie - wykorzystany w skryptach.</li></ul><p>Na poniższym zrzucie ekranu przedstawiona została konfiguracja obiektu <code>PANEL_PAGE</code> oraz obiektu wirtualnego Thermostat w domyślnym ustawieniu, czyli grzaniu.</p><img src="/images/images-pl/SMARTPANEL_CONFIG_V6_TYPE_THERMOSTATS_3.jpg" alt="SMARTPANEL<em>CONFIG</em>V6<em>TYPE</em>THERMOSTATS_3.jpg"/><img src="/images/images-pl/SMARTPANEL_CONFIG_V6_TYPE_THERMOSTATS_4.jpg" alt="SMARTPANEL<em>CONFIG</em>V6<em>TYPE</em>THERMOSTATS_4.jpg"/><p>Konfiguracja zdarzenia <code>OnTherm1ModeButtonClick</code>:</p><img src="/images/images-pl/SMARTPANEL_CONFIG_V6_TYPE_THERMOSTATS_5.jpg" alt="SMARTPANEL<em>CONFIG</em>V6<em>TYPE</em>THERMOSTATS_5.jpg"/><p>Skrypt <code>skrypt_zmiana_trybu()</code> dokonujący zmiany trybu pracy termostatu z grzania na chłodzenie i na odwrót:</p><img src="/images/images-pl/SMARTPANEL_CONFIG_V6_TYPE_THERMOSTATS_6.jpg" alt="SMARTPANEL<em>CONFIG</em>V6<em>TYPE</em>THERMOSTATS_6.jpg"/><p>Powyższy skrypt w wersji tekstowej:</p><pre><code>if(CLU221000454-&gt;Termostat-&gt;ControlDirection==0) then
CLU221000454-&gt;skrypt_chlodzenie()
else
CLU221000454-&gt;skrypt_grzanie()
end
</code></pre><p>Skrypt <code>skrypt_grzanie()</code> służący do zmiany cechy ControlDirection na wartość odpowiedzialną za grzanie, a także zmianę ikony i selekcję grzanie/chłodzenie:</p><pre><code>CLU221000454-&gt;Termostat-&gt;SetControlDirection(0) 
CLU221000454-&gt;x201000007_DOUT2-&gt;SwitchOff(0)
CLU221000454-&gt;x250002161_PANEL_PAGE1-&gt;SetObject_1_CustomIcon("sun")
</code></pre><img src="/images/images-pl/SMARTPANEL_CONFIG_V6_TYPE_THERMOSTATS_7.jpg" alt="SMARTPANEL<em>CONFIG</em>V6<em>TYPE</em>THERMOSTATS_7.jpg"/><p>Skrypt <code>skrypt_chlodzenie()</code> służący do zmiany cechy ControlDirection na wartość odpowiedzialną za chłodzenie, a także zmianę ikony i selekcję grzanie/chłodzenie:</p><pre><code>CLU221000454-&gt;Termostat-&gt;SetControlDirection(1)
CLU221000454-&gt;x201000007_DOUT2-&gt;SwitchOff(1)
CLU221000454-&gt;x250002161_PANEL_PAGE1-&gt;SetObject_1_CustomIcon("cold") 
</code></pre><img src="/images/images-pl/SMARTPANEL_CONFIG_V6_TYPE_THERMOSTATS_8.jpg" alt="SMARTPANEL<em>CONFIG</em>V6<em>TYPE</em>THERMOSTATS_8.jpg"/><h5>Predefiniowane zachowanie przycisków</h5><table class="table table-bordered w-75 mx-auto d-block d-md-table"><thead><tr><th>Przycisk</th><th>Krótkie/długie przyciśnięcie</th><th>Opis zachowania</th></tr></thead><tbody><tr><td>Lewy górny</td><td>Krótkie naciśnięcie (kliknięcie)</td><td>Wygenerowanie zdarzenia <code>OnThermXModeButtonClick</code>, gdzie X to numer termostatu na stronie</td></tr><tr><td>Lewy górny</td><td>Długie naciśnięcie (przytrzymanie)</td><td>Zmiana stanu termostatu: Off/On. Dodatkowo umożliwia przejście z trybu Manual na tryb Auto</td></tr><tr><td>Prawy górny</td><td>Krótkie naciśnięcie (kliknięcie)</td><td>Przejście do następnego termostatu na stronie w przypadku więcej niż jednego termostatu na stronie<br />Przejście do następnej strony w przypadku, kiedy na danej stronie jest tylko i wyłącznie jeden termostat</td></tr><tr><td>Prawy górny</td><td>Długie naciśnięcie (przytrzymanie)</td><td>Przejście do następnej strony</td></tr><tr><td>Lewy dolny</td><td>Krótkie naciśnięcie (kliknięcie)</td><td>Zmniejszenie temperatury zadanej (<code>PointValue</code>) o 0.1°C, a także zmiana trybu pracy z Auto na Manual</td></tr><tr><td>Lewy dolny</td><td>Długie naciśnięcie (przytrzymanie)</td><td>Zmniejszenie temperatury zadanej (<code>PointValue</code>) - dopóki przycisk jest przytrzymany, a także zmiana trybu pracy z Auto na Manual</td></tr><tr><td>Prawy dolny</td><td>Krótkie naciśnięcie (kliknięcie)</td><td>Zwiększenie temperatury zadanej (<code>PointValue</code>) o 0.1 °C, a także zmiana trybu pracy z Auto na Manual</td></tr><tr><td>Prawy dolny</td><td>Długie naciśnięcie (przytrzymanie)</td><td>Zwiększenie temperatury zadanej (<code>PointValue</code>) - dopóki przycisk jest przytrzymany, a także zmiana trybu pracy z Auto na Manual</td></tr></tbody></table><h5>Konfiguracja trybu Rozproszenia Logiki</h5><div class="alert alert-warning" role="alert"><small><b class="uwaga">UWAGA!</b><br>Moduł Smart Panel przy pierwszym podłączeniu do magistrali ma załączony tryb Rozproszenia Logiki - wartość 1 cech <code>DistributedLogicGroup_1 - DistributedLogicGroup_4</code> (Default Mode) - przypisana jest do czterech fizycznych przycisków - wejścia mogą sterować wyjściami, co zostało opisane poniżej. Po wykonaniu CLU Discovery i wysłaniu konfiguracji, następuje wyłączenie trybu.</small></div><h5>Konfiguracja trybu dla modułu Smart Panel</h5><img src="/images/images-pl/DISTRIBUTED_LOGIC_2.png" alt="DISTRIBUTED<em>LOGIC</em>2.png"/><p>W przypadku modułu Smart Panel powiązanie po stronie wejścia odbywa się w obiekcie <code>PANEL_PAGEx</code>. Wcześniej należy powiązać obiekty <code>PANEL_PAGEx</code> z odpowiednimi obiektami <code>PANEL_BUTTONx</code> poprzez ustawienie odpowiednich wartości cech <code>Object_x_Id</code>. W przypadku braku połączenia z CLU, w ustawionym trybie Logiki Rozproszonej mogą działać wszystkie 16 przycisków wraz ze zmianą stron za pomocą gestów.</p><div class="alert alert-warning" role="alert"><small><b class="uwaga">UWAGA!</b><br>Działanie Logiki Rozproszonej możliwe jest tylko w trybie <code>Buttons</code> obiektu <code>PANEL_PAGEx</code>.</small></div><h5>Działanie Logiki Rozproszonej pomiędzy obiektami <code>PANEL_PAGE</code> z przypisanymi <code>PANEL_BUTTON</code> oraz wyjściowymi</h5><div class="alert alert-warning" role="alert"><small><b class="uwaga">UWAGA!</b><br>Zdarzenia oraz wywoływane akcje są ustawione statycznie i nie ma możliwości ich zmiany.</small></div><p>Dostępne akcje podczas działania w trybie Rozproszenia Logiki:</p><p>Obiekt <code>PANEL_PAGE</code> z ustawionym obiektem<code>PANEL_BUTTON</code> oraz <code>DOUT</code></p><ul><li>Naciśnięcie i przytrzymanie przycisku (SwitchOn) --&gt; Załączenie danego wyjścia <code>DOUT</code>.</li><li>Zwolnienie przycisku (SwitchOff) --&gt; Wyłączenie danego wyjścia <code>DOUT</code>.</li><li>Krótkie naciśnięcie przycisku (Click) --&gt; Zmiana stanu na przeciwny <code> DOUT</code>.</li></ul><p>Obiekt <code>PANEL_PAGE</code> z ustawionym obiektem <code>PANEL_BUTTON</code> oraz <code>DIMM</code></p><ul><li>Naciśnięcie i przytrzymanie przycisku (SwitchOn) --&gt; Załączenie danego wyjścia<code> DIMM</code>.</li><li>Zwolnienie przycisku (SwitchOff) --&gt; Wyłączenie danego wyjścia <code>DIMM</code> .</li><li>Krótkie naciśnięcie przycisku (Click) --&gt; Zmiana stanu na przeciwny danego wyjścia <code>DIMM</code>.</li></ul><p>Obiekt <code>PANEL_PAGE</code> z ustawionym obiektem <code>PANEL_BUTTON</code> oraz <code>LEDRGBW</code></p><ul><li>Naciśnięcie i przytrzymanie przycisku (SwitchOn) --&gt; Załączenie danego kanału <code>LEDRGBW</code>.</li><li>Zwolnienie przycisku (SwitchOff) --&gt; Wyłączenie danego kanału <code>LEDRGBW</code>.</li><li>Krótkie naciśnięcie przycisku (Click) --&gt; Zmiana stanu na przeciwny danego kanału <code>LEDRGBW</code>.</li></ul><p>Obiekt <code>PANEL_PAGE</code> z ustawionym obiektem <code>PANEL_BUTTON</code> oraz <code>ROLLER_SHUTTER</code></p><ul><li>Naciśnięcie i przytrzymanie przycisku (SwitchOn) --&gt; Załączenie przekaźnika UP lub DOWN <code>ROLLER_SHUTTER</code> w zależności od poprzedniego kierunku jazdy.</li><li>Zwolnienie przycisku (SwitchOff) --&gt; Wyłączenie danego załączonego przekaźnika (UP lub DOWN).</li><li>Krótkie naciśnięcie przycisku (Click) --&gt; Zmiana stanu na przeciwny <code>ROLLER_SHUTTER</code>:</li><li>jeśli przekaźniki są wyłączone - załączenie przekaźnika UP lub DOWN, w zależności od poprzedniego kierunku jazdy,</li><li>jeśli przekaźnik UP lub DOWN jest załączony - wyłączenie przekaźnika.</li></ul><div class="alert alert-warning" role="alert"><small><b class="uwaga">UWAGA!</b><br>Załączenie przekaźnika UP lub DOWN jest załączeniem przekaźnika bez wyłączenia po upłynięciu czasu MaxTime. Przekaźniki należy wyłączyć danym wejściem sterującym obiektem <code>ROLLER_SHUTTER</code> w trybie Rozproszonej Logiki.</small></div><h5>Default Mode</h5><p>W przypadku, gdy do danego obiektu wartość cechy <code>DistributedLogicGroup</code> ustawiona jest na wartość 1, działa on w trybie <strong>Default Mode</strong>. Jest to specjalny tryb działania, domyślnie ustawiany dla każdego obiektu.</p><div class="alert alert-warning" role="alert"><small><b class="uwaga">UWAGA!</b><br>Zdarzenia oraz wywoływane akcje są ustawione statycznie i nie ma możliwości ich zmiany.</small></div><p>Moduł Smart Panel - steruje wszystkimi modułami wyjściowymi (RELAY 4HP DIN, RELAY 2HP DIN, DIMMER MOSFET DIN, ROLLER SHUTTER DIN) w sieci TFBUS będącymi również w Default Mode, przykładowo:</p><ul><li>SMART PANEL <code>PANEL_PAGE1</code> cecha <code>DistributedLogicGroup_1</code> --&gt; RELAY 4HP <code>OUT1</code> | RELAY 2HP <code>OUT1</code> | DIMMER MOSFET <code>DIMM1</code> | <code>ROLLER_SHUTTER1</code>.</li><li>SMART PANEL <code>PANEL_PAGE1</code> cecha <code>DistributedLogicGroup_2</code> --&gt; RELAY 4HP <code>OUT2</code> | RELAY 2HP <code>OUT2</code> | <code>ROLLER_SHUTTER2</code>.</li><li>SMART PANEL <code>PANEL_PAGE1</code> cecha <code>DistributedLogicGroup_3</code> --&gt; RELAY 4HP <code>OUT3</code> | <code>ROLLER_SHUTTER3</code>.</li><li>SMART PANEL <code>PANEL_PAGE1</code> cecha DistributedLogicGroup_4 --&gt; RELAY 4HP <code>OUT4</code>.</li></ul><div class="alert alert-warning" role="alert"><small><b class="uwaga">UWAGA!</b><br>Załączenie przekaźnika UP lub DOWN jest załączeniem przekaźnika bez wyłączenia po upłynięciu czasu MaxTime. Przekaźniki należy wyłączyć danym wejściem sterującym Roller Shutterem w trybie Rozproszonej Logiki.</small></div><div class="alert alert-warning" role="alert"><small><b class="uwaga">UWAGA!</b><br>Dla modułu Smart Panel działającego w Default Mode Logiki Rozproszonej zachowanie opisane powyżej jest identyczne dla każdego obiektu <code>PANEL_PAGE</code> (<code>PANEL_PAGE1</code> - <code>PANEL_PAGE4</code>).</small></div><nav class="navbar navbar-light bg-light gfooter"><div class="container-fluid"><span class="navbar-text"><small>&copy; 2022 Grenton Sp. z o. o.</small></span></div></nav></main></body></html>